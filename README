# Simple script for verifying Cockpit pull requests.

Hubbot is simplistic and not polished at all, but it might be useful
nevertheless.

DO NOT RUN HUBBOT YOURSELF!  IT ONLY WORKS CORRECTLY IN ITS SPECIAL
ENVIRONMENT ON OUR CI MACHINE.

But you might find the "trigger-hubbot" utility useful.  It can tell
hubbot to work on a pull request, probably to retry a bogus failure.
This could also be used to explicitly white-list pull requests from
external contributors, but that doesn't work yet.

The rest of this README is only about trigger-hubbot.

## Installing

"make install" will copy trigger-hubbot to /usr/local/bin.

## Setup

Put something like this into $HOME/.hubbotrc:

    { 'github_token': "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
      'user_whitelist': []
    }

The github_token is used to access the GitHub API.  You can create one
for your account at

    https://github.com/settings/applications

When generating a new personal access token, the scope only needs to
encompass public_repo (or repo if you're accessing a private repo).

## Running

To mark pull request number NNN as 'pending', run

    $ trigger-hubbot NNN

This will update the status of the current head commit of the given
pull request in a special way, and hubbot will eventually pick it up
for verification.

If the pull request is target at some other repo than
cockpit-project/cockpit, you can pass it as well:

    $ trigger-hubbot cgwalters/cockpit NNN
